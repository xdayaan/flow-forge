<div class="table-responsive bg-white rounded shadow-sm border">
    <table class="table table-hover mb-0 align-middle">
        <thead class="bg-light text-secondary">
            <tr>
                @for (col of columns; track col.key) {
                <th class="fw-semibold px-4 py-3 border-0">{{ col.label }}</th>
                }
            </tr>
        </thead>
        <tbody>
            @if (isLoading) {
            <tr>
                <td [attr.colspan]="columns.length" class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </td>
            </tr>
            } @else if (data.length === 0) {
            <tr>
                <td [attr.colspan]="columns.length" class="text-center py-5">
                    <div class="text-muted">
                        <i class="bi bi-inbox fs-1 d-block mb-3 opacity-25"></i>
                        No data available
                    </div>
                </td>
            </tr>
            } @else {
            @for (row of data; track row.id) {
            <tr>
                @for (col of columns; track col.key) {
                <td class="px-4 py-3">
                    @switch (col.type) {
                    @case ('date') {
                    {{ row[col.key] | date:'mediumDate' }}
                    }
                    @case ('badge') {
                    <span class="badge rounded-pill bg-light text-dark border">{{ row[col.key] }}</span>
                    }
                    @case ('boolean') {
                    <i class="bi" [class.bi-check-circle-fill]="row[col.key]" [class.bi-x-circle-fill]="!row[col.key]"
                        [class.text-success]="row[col.key]" [class.text-danger]="!row[col.key]"></i>
                    }
                    @case ('actions') {
                    <div class="dropdown">
                        <button class="btn btn-sm btn-link text-muted" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-three-dots-vertical"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0">
                            <li><button class="dropdown-item" (click)="onAction('edit', row)"><i
                                        class="bi bi-pencil me-2"></i>Edit</button></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><button class="dropdown-item text-danger" (click)="onAction('delete', row)"><i
                                        class="bi bi-trash me-2"></i>Delete</button></li>
                        </ul>
                    </div>
                    }
                    @default {
                    {{ row[col.key] }}
                    }
                    }
                </td>
                }
            </tr>
            }
            }
        </tbody>
    </table>

    @if (showPagination && !isLoading && totalCount > 0) {
    <div class="d-flex justify-content-between align-items-center p-3 border-top bg-light">
        <small class="text-muted">
            Showing {{ (pageIndex - 1) * pageSize + 1 }} to {{ pageIndex * pageSize > totalCount ? totalCount :
            pageIndex * pageSize }} of {{ totalCount }} entries
        </small>

        <nav aria-label="Page navigation">
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item" [class.disabled]="pageIndex === 1">
                    <button class="page-link border-0 bg-transparent" (click)="onPageChange(pageIndex - 1)">
                        <i class="bi bi-chevron-left"></i>
                    </button>
                </li>

                @for (page of pages; track page) {
                <li class="page-item" [class.active]="page === pageIndex">
                    <button class="page-link border-0 rounded-circle mx-1" (click)="onPageChange(page)">{{ page
                        }}</button>
                </li>
                }

                <li class="page-item" [class.disabled]="pageIndex === totalPages">
                    <button class="page-link border-0 bg-transparent" (click)="onPageChange(pageIndex + 1)">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                </li>
            </ul>
        </nav>
    </div>
    }
</div>